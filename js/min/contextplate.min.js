!function(a){function b(b,e){this.element=b,this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="contextplate",d={overlay_template:'<div class="contextplate-overlay"></div>'};b.prototype={init:function(){function b(){d.find("li.seperate").length>0?d.find("li.seperate").prev().addClass("last"):d.find("li:last-child").addClass("last")}var c=this,d=(c.settings,a(this.element)),e=d.data("context-id"),f=a("[data-context-trigger="+e+"]");d.addClass("contextplate"),c.overlay_add(),b(),a(".contextplate-overlay, .contextplate .close, .contextplate a").on("click",function(a){a.preventDefault(),c.contextplate_close(d)}),f.on("click",function(a){a.preventDefault(),c.contextplate_reveal(d)})},contextplate_close:function(b){b.removeClass("reveal"),a("html").removeClass("contextplate-reveal")},contextplate_reveal:function(b){b.addClass("reveal"),a("html").addClass("contextplate-reveal")},overlay_add:function(){0==a(".contextplate-overlay").length&&a("body").append(this.settings.overlay_template)}},a.fn[c]=function(d){var e;return this.each(function(){e=a.data(this,"plugin_"+c),e||(e=new b(this,d),a.data(this,"plugin_"+c,e))}),e}}(jQuery,window,document);