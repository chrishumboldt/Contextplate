!function(a,b){function c(b,c){this.element=b,this.settings=a.extend({},e,c),this._defaults=e,this._name=d,this.init()}var d="contextplate",e={overlay_template:'<div class="contextplate-overlay"></div>'};c.prototype={init:function(){function c(){e.find("li.seperate").length>0?e.find("li.seperate").prev().addClass("last"):e.find("li:last-child").addClass("last")}var d=this,e=(d.settings,a(this.element)),f=e.data("context-id"),g=a("[data-context-trigger="+f+"]"),h=a(b).width();e.addClass("contextplate"),d.overlay_add(),c(),a(".contextplate-overlay, .contextplate .close, .contextplate a").on("click",function(a){a.preventDefault(),d.contextplate_close(e)}),a(b).resize(function(){a(b).width()!=h&&(d.contextplate_close(e),h=a(b).width())}),g.on("click",function(b){b.preventDefault(),d.contextplate_reveal(e,a(this))})},contextplate_close:function(b){b.removeClass("reveal"),a("html").removeClass("contextplate-reveal")},contextplate_reveal:function(c,d){if(c.addClass("reveal"),a("html").addClass("contextplate-reveal"),a(b).width()>700){var e=d.offset(),f=d.width(),g=d.height(),h=e.top+g+14,i=e.left-f/2;0>i&&(i=4),c.css({top:h,left:i,bottom:"auto"})}else c.attr({style:""})},overlay_add:function(){0==a(".contextplate-overlay").length&&a("body").append(this.settings.overlay_template)}},a.fn[d]=function(b){var e;return this.each(function(){e=a.data(this,"plugin_"+d),e||(e=new c(this,b),a.data(this,"plugin_"+d,e))}),e}}(jQuery,window,document);